# @cjsx React.DOM

React = require('react')
Router = require('react-router')

Routes = Router.Routes
Route = Router.Route
DefaultRoute = Router.DefaultRoute
NotFoundRoute = Router.NotFoundRoute

App = require('./views/app.coffee')
AppIndex = require('./views/index.coffee')
AppNotFound = require('./views/not-found.coffee')

Budget = require('budgets/views/budget.coffee')
BudgetOverview = require('budgets/views/overview.coffee')
BudgetNotFound = require('budgets/views/not-found.coffee')

module.exports = (flux, path) ->
  <Routes initialPath={path} location="history">
    <Route handler={App} flux={flux}>
      <DefaultRoute handler={AppIndex} flux={flux} />
      <Route name="budget" path="budgets/:budgetId" handler={Budget} flux={flux}>
        <DefaultRoute handler={BudgetOverview} flux={flux} />
      </Route>
    </Route>
  </Routes>
