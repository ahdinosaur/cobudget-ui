# @cjsx React.DOM

debug = require('debug')("cobudget-ui:nav:views:link")
React = require('react')
invariant = require('react/lib/invariant')

FluxChildMixin = require('fluxxor').FluxChildMixin(React)

Link = React.createClass
  mixins: [FluxChildMixin]

  propTypes:
    href: React.PropTypes.string

  onClick: (e) ->
    e.preventDefault()
    @navigate(@href())

  href: ->
    if (@props.href)
      return @props.href
    else
      invariant(
        false,
        'provide "href" prop to Link component'
      )

  navigate: (path) ->
    @getFlux().actions.nav.navigate(path)

  render: ->
    return (
      <a href={@href()} onClick={@onClick}>
        {@props.children}
      </a>
    )

module.exports = Link
